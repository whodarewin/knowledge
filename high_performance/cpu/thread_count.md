# 线程数计算
## IO类型（无连接池限制）
假设一次IO请求耗时为M，总的一次业务调用总耗时为N，那么在单核的情况下，线程数设置为N/（1-M），多核即为N/(1-M）* CPU核数。  
## 锁类型
假设一次请求耗时为N，阻塞时间为M，则CPU全部利用起来所需要的线程数为N/(1-M) * CPU核数。    
如果锁发生排队等待，那么CPU线程数设置太高，也不能够提升系统吞吐量，则锁排队等待限定的线程数是N/M。  
这两种都会限定CPU的线程数，取里面最小的那个。
## 多许可类型
多许可，即一个资源最多允许X个线程访问这种，可以看作是上述锁类型发生排队等待的情况N/M * X，仍然取CPU全部利用起来的核数与这个时间的最小值。